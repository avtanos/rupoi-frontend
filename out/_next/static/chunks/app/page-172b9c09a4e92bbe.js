(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{52452:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var t=a(95155),r=a(12115),l=a(95706),n=a(64615),d=a(26991),c=a(98128),i=a(68425),x=a(47734),o=a(73697),m=a(23508),h=a(16533),u=a(78765),p=a(12235),g=a(69386),j=a(80019),y=a(47643),f=a(78894),v=a(91169),N=a(89715),b=a(26983),w=a(42529);let k=["#3B82F6","#10B981","#F59E0B","#EF4444"];function A(){var e;let[s,a]=(0,r.useState)(null),[l,n]=(0,r.useState)(!0);(0,r.useEffect)(()=>{A()},[]);let A=async()=>{try{let e=await f.u.getDashboardStats();a(e)}catch(e){console.error("Failed to load dashboard data:",e)}finally{n(!1)}};if(l)return(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});let _=[{title:"Всего пациентов",value:(null==s?void 0:s.total_patients)||0,icon:v.A,color:"text-blue-600",bgColor:"bg-blue-100"},{title:"Всего заказов",value:(null==s?void 0:s.total_orders)||0,icon:N.A,color:"text-green-600",bgColor:"bg-green-100"},{title:"В работе",value:(null==s?void 0:s.active_orders)||0,icon:b.A,color:"text-yellow-600",bgColor:"bg-yellow-100"},{title:"Готово к выдаче",value:(null==s?void 0:s.ready_orders)||0,icon:w.A,color:"text-purple-600",bgColor:"bg-purple-100"}],C=[{name:"Протезы",value:45,count:180},{name:"Обувь",value:30,count:120},{name:"Ортопедические",value:20,count:80},{name:"Ремонт",value:5,count:20}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Главная панель"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Обзор системы управления протезированием"})]}),(0,t.jsx)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:_.map(e=>{let s=e.icon;return(0,t.jsx)("div",{className:"card p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md ".concat(e.bgColor),children:(0,t.jsx)(s,{className:"h-6 w-6 ".concat(e.color)})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:e.title}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.value})]})]})},e.title)})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"card p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Заказы по месяцам"}),(0,t.jsx)(d.u,{width:"100%",height:300,children:(0,t.jsxs)(c.E,{data:[{month:"Янв",orders:45},{month:"Фев",orders:52},{month:"Мар",orders:38},{month:"Апр",orders:61},{month:"Май",orders:47},{month:"Июн",orders:55}],children:[(0,t.jsx)(i.d,{strokeDasharray:"3 3"}),(0,t.jsx)(x.W,{dataKey:"month"}),(0,t.jsx)(o.h,{}),(0,t.jsx)(m.m,{}),(0,t.jsx)(h.y,{dataKey:"orders",fill:"#3B82F6"})]})})]}),(0,t.jsxs)("div",{className:"card p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Заказы по типам"}),(0,t.jsx)(d.u,{width:"100%",height:300,children:(0,t.jsxs)(u.r,{children:[(0,t.jsx)(p.F,{data:C,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,count:a}=e;return"".concat(s,": ").concat(a)},outerRadius:80,fill:"#8884d8",dataKey:"value",children:C.map((e,s)=>(0,t.jsx)(g.f,{fill:k[s%k.length]},"cell-".concat(s)))}),(0,t.jsx)(m.m,{})]})})]})]}),(0,t.jsxs)("div",{className:"card p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Распределение по статусам"}),(0,t.jsx)(d.u,{width:"100%",height:300,children:(0,t.jsxs)(j.b,{data:[{status:"Новые",count:25},{status:"В производстве",count:40},{status:"На примерке",count:15},{status:"Готово",count:20}],children:[(0,t.jsx)(i.d,{strokeDasharray:"3 3"}),(0,t.jsx)(x.W,{dataKey:"status"}),(0,t.jsx)(o.h,{}),(0,t.jsx)(m.m,{}),(0,t.jsx)(y.N,{type:"monotone",dataKey:"count",stroke:"#10B981",strokeWidth:2})]})})]}),(0,t.jsxs)("div",{className:"card p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Последние заказы"}),(0,t.jsx)("div",{className:"overflow-hidden",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"№ заказа"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Пациент"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Тип"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(null==s||null==(e=s.recent_orders)?void 0:e.map(e=>{var s,a;return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.number}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(null==(s=e.cart)?void 0:s.first_name)||""," ",(null==(a=e.cart)?void 0:a.name)||""]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.order_type}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"badge badge-info",children:1===e.status?"Новый":2===e.status?"В работе":3===e.status?"Готов":"Выдан"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString("ru-RU"):"Не указано"})]},e.id)}))||(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"Нет данных"})})})]})})]})]})}var _=a(70017);function C(){let{isAuthenticated:e,isLoading:s}=(0,l.A)();return s?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e?(0,t.jsx)(n.A,{children:(0,t.jsx)(A,{})}):(0,t.jsx)(_.default,{})}},54051:(e,s,a)=>{Promise.resolve().then(a.bind(a,52452))},64615:(e,s,a)=>{"use strict";a.d(s,{A:()=>N});var t=a(95155),r=a(12115),l=a(52619),n=a.n(l),d=a(95706),c=a(65993),i=a(91169),x=a(89715),o=a(7744),m=a(87066),h=a(26617),u=a(33),p=a(89559),g=a(15870),j=a(65229),y=a(9540),f=a(84926);let v=[{name:"Главная",href:"/",icon:c.A},{name:"Картотека",href:"/carts",icon:i.A},{name:"Заказы",href:"/orders",icon:x.A},{name:"Медицинский отдел",href:"/medical",icon:o.A},{name:"Накладные",href:"/overheads",icon:m.A},{name:"Склад",href:"/warehouse",icon:h.A},{name:"Отчеты",href:"/reports",icon:u.A},{name:"Интеграция",href:"/integration",icon:p.A},{name:"Настройки",href:"/settings",icon:g.A}];function N(e){var s;let{children:a}=e,{user:l,logout:c}=(0,d.A)(),[i,x]=(0,r.useState)(!1),o=async()=>{try{await c()}catch(e){console.error("Logout failed:",e)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(i?"block":"hidden"),children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>x(!1)}),(0,t.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"}),(0,t.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(j.A,{className:"h-6 w-6"})})]}),(0,t.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:v.map(e=>{let s=e.icon;return(0,t.jsxs)(n(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,t.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),(0,t.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,t.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,t.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"})}),(0,t.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:v.map(e=>{let s=e.icon;return(0,t.jsxs)(n(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,t.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),(0,t.jsxs)("div",{className:"lg:pl-64",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,t.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>x(!0),children:(0,t.jsx)(y.A,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,t.jsx)("div",{className:"flex flex-1"}),(0,t.jsx)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[null==l?void 0:l.first_name," ",null==l?void 0:l.last_name]}),(0,t.jsx)("div",{className:"text-gray-500",children:null==l||null==(s=l.role)?void 0:s.name})]}),(0,t.jsx)("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(f.A,{className:"h-5 w-5"})})]})})]})]}),(0,t.jsx)("main",{className:"py-6",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:a})})]})]})}},70017:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d});var t=a(95155),r=a(12115),l=a(20063),n=a(95706);function d(){let[e,s]=(0,r.useState)({username:"",password:""}),[a,d]=(0,r.useState)(!1),[c,i]=(0,r.useState)(""),{login:x}=(0,n.A)(),o=(0,l.useRouter)(),m=async s=>{s.preventDefault(),d(!0),i("");try{await x(e),o.push("/")}catch(e){i(e instanceof Error?e.message:"Ошибка входа в систему")}finally{d(!1)}},h=e=>{let{name:a,value:t}=e.target;s(e=>({...e,[a]:t}))};return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Вход в систему РУПИО"}),(0,t.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Система управления протезированием"})]}),(0,t.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:m,children:[(0,t.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"sr-only",children:"Логин"}),(0,t.jsx)("input",{id:"username",name:"username",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Логин",value:e.username,onChange:h})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Пароль"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm",placeholder:"Пароль",value:e.password,onChange:h})]})]}),c&&(0,t.jsx)("div",{className:"rounded-md bg-red-50 p-4",children:(0,t.jsx)("div",{className:"text-sm text-red-700",children:c})}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:a?(0,t.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):"Войти"})}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Тестовые данные: ",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-mono",children:"admin / admin123"})]})})]})]})})}}},e=>{e.O(0,[310,941,708,706,441,255,358],()=>e(e.s=54051)),_N_E=e.O()}]);
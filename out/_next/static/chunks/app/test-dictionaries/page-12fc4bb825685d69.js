(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},17910:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},42529:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},52056:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},57828:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},60015:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var r=t(95155),a=t(12115),l=t(95706),i=t(64615),n=t(78894),c=t(71847);let d=(0,c.A)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);var o=t(42529),m=t(78874),x=t(85710);function h(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!1),i=["oblasts","raions","localities","msecs","disabilities","device_types","amputation_types","diagnosis_types","materials","works","employees","stump_forms","scar_types","skin_condition_types","bone_dust_types","shoe_models","shoe_colors","heel_materials","device_materials","order_statuses","priority_levels","document_types","passport_series","age_groups","disability_categories","disability_causes","service_types"],c=async()=>{for(let e of(l(!0),s([]),i))try{s(s=>[...s,{dictionary:e,status:"loading",count:0}]);let t="get".concat(e.charAt(0).toUpperCase()+e.slice(1)),r=await n.u[t]();s(s=>s.map(s=>s.dictionary===e?{...s,status:"success",count:Array.isArray(r)?r.length:0}:s))}catch(t){s(s=>s.map(s=>s.dictionary===e?{...s,status:"error",count:0,error:t instanceof Error?t.message:"Unknown error"}:s))}l(!1)},h=e.filter(e=>"success"===e.status).length,g=e.filter(e=>"error"===e.status).length,y=e.filter(e=>"loading"===e.status).length;return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)(x.A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Тестирование справочников"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Проверка работы API методов для всех справочников"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:y}),(0,r.jsx)("div",{className:"text-sm text-blue-800",children:"Загружается"})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:h}),(0,r.jsx)("div",{className:"text-sm text-green-800",children:"Успешно"})]}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:g}),(0,r.jsx)("div",{className:"text-sm text-red-800",children:"Ошибки"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:i.length}),(0,r.jsx)("div",{className:"text-sm text-gray-800",children:"Всего"})]})]}),(0,r.jsx)("button",{onClick:c,disabled:t,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{className:"h-4 w-4 mr-2 animate-spin"}),"Тестирование..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Запустить тесты"]})})]}),(0,r.jsx)("div",{className:"space-y-2",children:e.map((e,s)=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 ".concat((e=>{switch(e){case"loading":return"bg-blue-50 border-blue-200";case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}})(e.status)),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"loading":return(0,r.jsx)(d,{className:"h-4 w-4 animate-spin text-blue-500"});case"success":return(0,r.jsx)(o.A,{className:"h-4 w-4 text-green-500"});case"error":return(0,r.jsx)(m.A,{className:"h-4 w-4 text-red-500"});default:return null}})(e.status),(0,r.jsx)("span",{className:"ml-3 font-medium text-gray-900",children:e.dictionary}),"success"===e.status&&(0,r.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",e.count," записей)"]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["loading"===e.status&&"Загрузка...","success"===e.status&&"✓ Готово","error"===e.status&&"✗ Ошибка"]})]}),e.error&&(0,r.jsx)("div",{className:"mt-2 text-sm text-red-600",children:e.error})]},e.dictionary))}),0===e.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(x.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-500",children:'Нажмите "Запустить тесты" для проверки справочников'})]})]})}var g=t(6132);let y=(0,c.A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),u=(0,c.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var p=t(57828);function b(e){let{dictionaryName:s,displayName:t}=e,[l,i]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[o,m]=(0,a.useState)(null),[h,b]=(0,a.useState)(!1),[j,f]=(0,a.useState)(!1),N=async()=>{try{d(!0),m(null);let e="get".concat(s.charAt(0).toUpperCase()+s.slice(1)),t=await n.u[e]();i(Array.isArray(t)?t:[])}catch(e){m(e instanceof Error?e.message:"Unknown error"),i([])}finally{d(!1)}};return(0,a.useEffect)(()=>{h&&N()},[h,s]),(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,r.jsxs)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 flex items-center justify-between",onClick:()=>b(!h),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[h?(0,r.jsx)(y,{className:"h-4 w-4 text-gray-500 mr-2"}):(0,r.jsx)(u,{className:"h-4 w-4 text-gray-500 mr-2"}),c?(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):o?(0,r.jsx)(g.A,{className:"h-4 w-4 text-red-600"}):l.length>0?(0,r.jsx)(x.A,{className:"h-4 w-4 text-green-600"}):(0,r.jsx)(x.A,{className:"h-4 w-4 text-gray-600"}),(0,r.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:t}),(0,r.jsx)("span",{className:"ml-2 text-sm ".concat(c?"text-blue-600":o?"text-red-600":l.length>0?"text-green-600":"text-gray-600"),children:c?"Загрузка...":o?"Ошибка":"(".concat(l.length," записей)")})]}),l.length>0&&(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(!j)},className:"text-blue-600 hover:text-blue-800 flex items-center text-sm",children:[(0,r.jsx)(p.A,{className:"h-4 w-4 mr-1"}),j?"Скрыть":"Показать"," данные"]})]}),h&&(0,r.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[c&&(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),o&&(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(g.A,{className:"h-5 w-5 text-red-600 mr-2"}),(0,r.jsx)("span",{className:"text-red-800 font-medium",children:"Ошибка загрузки"})]}),(0,r.jsx)("p",{className:"text-red-700 mt-1",children:o})]}),!c&&!o&&0===l.length&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(x.A,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,r.jsx)("p",{children:"Данные не найдены"})]}),!c&&!o&&l.length>0&&j&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-3",children:["Показано ",Math.min(5,l.length)," из ",l.length," записей"]}),(0,r.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.slice(0,5).map((e,s)=>(0,r.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,r.jsx)("div",{className:"text-sm font-mono text-gray-800",children:JSON.stringify(e,null,2)})},s))}),l.length>5&&(0,r.jsxs)("div",{className:"text-sm text-gray-500 text-center",children:["... и еще ",l.length-5," записей"]})]})]})]})}var j=t(52056);function f(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!1),i=async()=>{l(!0),s([]);let e=[];try{let s=await n.u.getOblasts();if(e.push({test:"Области загружаются",status:Array.isArray(s)&&s.length>0?"pass":"fail",message:"Найдено ".concat(Array.isArray(s)?s.length:0," областей")}),Array.isArray(s)&&s.length>0){let t=s[0],r=t.id&&t.name&&t.code;e.push({test:"Структура области корректна",status:r?"pass":"fail",message:r?"Все обязательные поля присутствуют":"Отсутствуют обязательные поля"})}let t=await n.u.getRaions(1);if(e.push({test:"Районы загружаются",status:Array.isArray(t)&&t.length>0?"pass":"fail",message:"Найдено ".concat(Array.isArray(t)?t.length:0," районов")}),Array.isArray(t)&&t.length>0){let s=t[0],r=void 0!==s.oblast;e.push({test:"Районы связаны с областями",status:r?"pass":"fail",message:r?"Связь с областью присутствует":"Отсутствует связь с областью"})}let r=await n.u.getDeviceTypes();if(e.push({test:"Типы устройств загружаются",status:Array.isArray(r)&&r.length>0?"pass":"fail",message:"Найдено ".concat(Array.isArray(r)?r.length:0," типов устройств")}),Array.isArray(r)&&r.length>0){let s=r.some(e=>void 0!==e.order_type);e.push({test:"Типы устройств имеют order_type",status:s?"pass":"warning",message:s?"order_type присутствует":"order_type отсутствует (может быть нормально)"})}let a=await n.u.getMaterials();if(e.push({test:"Материалы загружаются",status:Array.isArray(a)&&a.length>0?"pass":"fail",message:"Найдено ".concat(Array.isArray(a)?a.length:0," материалов")}),Array.isArray(a)&&a.length>0){let s=a[0],t=s.id&&s.name&&s.code&&s.unit&&s.price;e.push({test:"Структура материала корректна",status:t?"pass":"fail",message:t?"Все обязательные поля присутствуют":"Отсутствуют обязательные поля"})}let l=await n.u.getPriorityLevels();e.push({test:"Уровни приоритета загружаются",status:Array.isArray(l)&&l.length>0?"pass":"fail",message:"Найдено ".concat(Array.isArray(l)?l.length:0," уровней приоритета")});let i=await n.u.getDocumentTypes();e.push({test:"Типы документов загружаются",status:Array.isArray(i)&&i.length>0?"pass":"fail",message:"Найдено ".concat(Array.isArray(i)?i.length:0," типов документов")});let c=await n.u.getStumpForms();e.push({test:"Формы культи загружаются",status:Array.isArray(c)&&c.length>0?"pass":"fail",message:"Найдено ".concat(Array.isArray(c)?c.length:0," форм культи")});let d=await n.u.getScarTypes();e.push({test:"Типы рубцов загружаются",status:Array.isArray(d)&&d.length>0?"pass":"fail",message:"Найдено ".concat(Array.isArray(d)?d.length:0," типов рубцов")})}catch(s){e.push({test:"Общая проверка",status:"fail",message:"Ошибка выполнения тестов: ".concat(s instanceof Error?s.message:"Unknown error")})}s(e),l(!1)},c=e.filter(e=>"pass"===e.status).length,d=e.filter(e=>"fail"===e.status).length,h=e.filter(e=>"warning"===e.status).length;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(x.A,{className:"h-5 w-5 mr-2"}),"Валидация данных"]}),(0,r.jsx)("button",{onClick:i,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Проверка...":"Запустить проверку"})]}),e.length>0&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c}),(0,r.jsx)("div",{className:"text-sm text-green-800",children:"Успешно"})]}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:d}),(0,r.jsx)("div",{className:"text-sm text-red-800",children:"Ошибки"})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:h}),(0,r.jsx)("div",{className:"text-sm text-yellow-800",children:"Предупреждения"})]})]}),(0,r.jsx)("div",{className:"space-y-2",children:e.map((e,s)=>(0,r.jsxs)("div",{className:"border rounded-lg p-3 ".concat((e=>{switch(e){case"pass":return"bg-green-50 border-green-200";case"fail":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-gray-50 border-gray-200"}})(e.status)),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"pass":return(0,r.jsx)(o.A,{className:"h-4 w-4 text-green-500"});case"fail":return(0,r.jsx)(m.A,{className:"h-4 w-4 text-red-500"});case"warning":return(0,r.jsx)(j.A,{className:"h-4 w-4 text-yellow-500"});default:return null}})(e.status),(0,r.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:e.test})]}),(0,r.jsx)("p",{className:"ml-6 text-sm text-gray-600 mt-1",children:e.message})]},s))}),0===e.length&&!t&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(x.A,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,r.jsx)("p",{children:'Нажмите "Запустить проверку" для валидации данных'})]})]})}var N=t(89559);function v(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!1),i=async()=>{l(!0),s([]);let e=[];try{e.push({test:"Загрузка областей",status:"loading",details:"Загружаем области..."});let s=await n.u.getOblasts(),t=Array.isArray(s)?s:[];e[0]={test:"Загрузка областей",status:t.length>0?"success":"error",details:"Загружено ".concat(t.length," областей"),data:t.slice(0,3)}}catch(s){e[0]={test:"Загрузка областей",status:"error",details:"Ошибка: ".concat(s instanceof Error?s.message:"Unknown error")}}try{e.push({test:"Загрузка районов",status:"loading",details:"Загружаем районы..."});let s=await n.u.getRaions(1),t=Array.isArray(s)?s:[],r=t.filter(e=>void 0!==e.oblast);e[1]={test:"Загрузка районов",status:t.length>0?"success":"error",details:"Загружено ".concat(t.length," районов, ").concat(r.length," с привязкой к области"),data:t.slice(0,3)}}catch(s){e[1]={test:"Загрузка районов",status:"error",details:"Ошибка: ".concat(s instanceof Error?s.message:"Unknown error")}}try{e.push({test:"Типы устройств с order_type",status:"loading",details:"Загружаем типы устройств..."});let s=await n.u.getDeviceTypes(),t=Array.isArray(s)?s:[],r=t.filter(e=>void 0!==e.order_type),a=t.reduce((e,s)=>{let t=s.order_type||"unknown";return e[t]=(e[t]||0)+1,e},{});e[2]={test:"Типы устройств с order_type",status:t.length>0?"success":"error",details:"Загружено ".concat(t.length," типов устройств, ").concat(r.length," с order_type. Группировка: ").concat(JSON.stringify(a)),data:t.slice(0,3)}}catch(s){e[2]={test:"Типы устройств с order_type",status:"error",details:"Ошибка: ".concat(s instanceof Error?s.message:"Unknown error")}}try{e.push({test:"Материалы с ценами",status:"loading",details:"Загружаем материалы..."});let s=await n.u.getMaterials(),t=Array.isArray(s)?s:[],r=t.filter(e=>void 0!==e.price&&e.price>0),a=t.reduce((e,s)=>e+(s.price||0),0);e[3]={test:"Материалы с ценами",status:t.length>0?"success":"error",details:"Загружено ".concat(t.length," материалов, ").concat(r.length," с ценами. Общая стоимость: ").concat(a.toLocaleString()," сом"),data:t.slice(0,3)}}catch(s){e[3]={test:"Материалы с ценами",status:"error",details:"Ошибка: ".concat(s instanceof Error?s.message:"Unknown error")}}try{e.push({test:"Медицинские справочники",status:"loading",details:"Загружаем медицинские справочники..."});let[s,t,r,a]=await Promise.all([n.u.getStumpForms(),n.u.getScarTypes(),n.u.getSkinConditionTypes(),n.u.getBoneDustTypes()]),l=[Array.isArray(s)?s.length:0,Array.isArray(t)?t.length:0,Array.isArray(r)?r.length:0,Array.isArray(a)?a.length:0].reduce((e,s)=>e+s,0);e[4]={test:"Медицинские справочники",status:l>0?"success":"error",details:"Формы культи: ".concat(Array.isArray(s)?s.length:0,", Типы рубцов: ").concat(Array.isArray(t)?t.length:0,", Состояния кожи: ").concat(Array.isArray(r)?r.length:0,", Типы костного опила: ").concat(Array.isArray(a)?a.length:0),data:{stumpForms:Array.isArray(s)?s.slice(0,2):[],scarTypes:Array.isArray(t)?t.slice(0,2):[]}}}catch(s){e[4]={test:"Медицинские справочники",status:"error",details:"Ошибка: ".concat(s instanceof Error?s.message:"Unknown error")}}try{e.push({test:"Новые системные справочники",status:"loading",details:"Загружаем новые справочники..."});let[s,t,r,a]=await Promise.all([n.u.getOrderStatuses(),n.u.getPriorityLevels(),n.u.getDocumentTypes(),n.u.getAgeGroups()]),l=[Array.isArray(s)?s.length:0,Array.isArray(t)?t.length:0,Array.isArray(r)?r.length:0,Array.isArray(a)?a.length:0].reduce((e,s)=>e+s,0);e[5]={test:"Новые системные справочники",status:l>0?"success":"error",details:"Статусы заказов: ".concat(Array.isArray(s)?s.length:0,", Приоритеты: ").concat(Array.isArray(t)?t.length:0,", Типы документов: ").concat(Array.isArray(r)?r.length:0,", Возрастные группы: ").concat(Array.isArray(a)?a.length:0),data:{orderStatuses:Array.isArray(s)?s.slice(0,2):[],priorities:Array.isArray(t)?t.slice(0,2):[]}}}catch(s){e[5]={test:"Новые системные справочники",status:"error",details:"Ошибка: ".concat(s instanceof Error?s.message:"Unknown error")}}s(e),l(!1)},c=e.filter(e=>"success"===e.status).length,x=e.filter(e=>"error"===e.status).length,h=e.filter(e=>"loading"===e.status).length;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(N.A,{className:"h-5 w-5 mr-2"}),"Интеграционные тесты"]}),(0,r.jsx)("button",{onClick:i,disabled:t,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{className:"h-4 w-4 mr-2 animate-spin"}),"Тестирование..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.A,{className:"h-4 w-4 mr-2"}),"Запустить тесты"]})})]}),e.length>0&&(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c}),(0,r.jsx)("div",{className:"text-sm text-green-800",children:"Успешно"})]}),(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-red-600",children:x}),(0,r.jsx)("div",{className:"text-sm text-red-800",children:"Ошибки"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:h}),(0,r.jsx)("div",{className:"text-sm text-blue-800",children:"Загружается"})]})]}),(0,r.jsx)("div",{className:"space-y-3",children:e.map((e,s)=>(0,r.jsx)("div",{className:"border rounded-lg p-4 ".concat((e=>{switch(e){case"loading":return"bg-blue-50 border-blue-200";case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}})(e.status)),children:(0,r.jsxs)("div",{className:"flex items-start",children:[(e=>{switch(e){case"loading":return(0,r.jsx)(d,{className:"h-4 w-4 animate-spin text-blue-500"});case"success":return(0,r.jsx)(o.A,{className:"h-4 w-4 text-green-500"});case"error":return(0,r.jsx)(m.A,{className:"h-4 w-4 text-red-500"});default:return null}})(e.status),(0,r.jsxs)("div",{className:"ml-3 flex-1",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900",children:e.test}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.details}),e.data&&(0,r.jsxs)("details",{className:"mt-2",children:[(0,r.jsx)("summary",{className:"text-sm text-blue-600 cursor-pointer hover:text-blue-800",children:"Показать данные"}),(0,r.jsx)("pre",{className:"mt-2 text-xs bg-gray-100 p-2 rounded overflow-x-auto",children:JSON.stringify(e.data,null,2)})]})]})]})},s))}),0===e.length&&!t&&(0,r.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,r.jsx)(N.A,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),(0,r.jsx)("p",{children:'Нажмите "Запустить тесты" для интеграционного тестирования'})]})]})}let A=(0,c.A)("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);var w=t(17910);let k=[{key:"oblasts",name:"Области"},{key:"raions",name:"Районы"},{key:"localities",name:"Населенные пункты"},{key:"msecs",name:"МСЭК организации"},{key:"device_types",name:"Типы устройств"},{key:"amputation_types",name:"Типы ампутации"},{key:"diagnosis_types",name:"Типы диагнозов"},{key:"materials",name:"Материалы"},{key:"works",name:"Виды работ"},{key:"employees",name:"Сотрудники"},{key:"stump_forms",name:"Формы культи"},{key:"scar_types",name:"Типы рубцов"},{key:"skin_condition_types",name:"Состояния кожи"},{key:"bone_dust_types",name:"Типы костного опила"},{key:"shoe_models",name:"Модели обуви"},{key:"shoe_colors",name:"Цвета обуви"},{key:"heel_materials",name:"Материалы каблуков"},{key:"device_materials",name:"Материалы устройств"},{key:"order_statuses",name:"Статусы заказов"},{key:"priority_levels",name:"Уровни приоритета"},{key:"document_types",name:"Типы документов"},{key:"passport_series",name:"Серии паспортов"},{key:"age_groups",name:"Возрастные группы"},{key:"disability_categories",name:"Категории инвалидности"},{key:"disability_causes",name:"Причины инвалидности"},{key:"service_types",name:"Типы услуг"}];function _(){let{isAuthenticated:e,isLoading:s}=(0,l.A)();return s?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):e?(0,r.jsx)(i.A,{children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center mb-4",children:[(0,r.jsx)(A,{className:"h-8 w-8 text-blue-600 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Тестирование справочников RUPOI"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Проверка работы всех API методов и данных справочников"})]})]})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center mb-4",children:[(0,r.jsx)(w.A,{className:"h-5 w-5 mr-2"}),"Валидация данных"]}),(0,r.jsx)(f,{})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center mb-4",children:[(0,r.jsx)(N.A,{className:"h-5 w-5 mr-2"}),"Интеграционные тесты"]}),(0,r.jsx)(v,{})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(x.A,{className:"h-5 w-5 mr-2"}),"Быстрое тестирование"]}),(0,r.jsx)(h,{})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(A,{className:"h-5 w-5 mr-2"}),"Детальное тестирование"]}),(0,r.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:k.map(e=>(0,r.jsx)(b,{dictionaryName:e.key,displayName:e.name},e.key))})]})]})]})}):(0,r.jsx)("div",{children:"Необходима авторизация"})}},64615:(e,s,t)=>{"use strict";t.d(s,{A:()=>N});var r=t(95155),a=t(12115),l=t(52619),i=t.n(l),n=t(95706),c=t(65993),d=t(91169),o=t(89715),m=t(7744),x=t(87066),h=t(26617),g=t(33),y=t(89559),u=t(15870),p=t(65229),b=t(9540),j=t(84926);let f=[{name:"Главная",href:"/",icon:c.A},{name:"Картотека",href:"/carts",icon:d.A},{name:"Заказы",href:"/orders",icon:o.A},{name:"Медицинский отдел",href:"/medical",icon:m.A},{name:"Накладные",href:"/overheads",icon:x.A},{name:"Склад",href:"/warehouse",icon:h.A},{name:"Отчеты",href:"/reports",icon:g.A},{name:"Интеграция",href:"/integration",icon:y.A},{name:"Настройки",href:"/settings",icon:u.A}];function N(e){var s;let{children:t}=e,{user:l,logout:c}=(0,n.A)(),[d,o]=(0,a.useState)(!1),m=async()=>{try{await c()}catch(e){console.error("Logout failed:",e)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(d?"block":"hidden"),children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>o(!1)}),(0,r.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"}),(0,r.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,r.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:f.map(e=>{let s=e.icon;return(0,r.jsxs)(i(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,r.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),(0,r.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,r.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,r.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"})}),(0,r.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:f.map(e=>{let s=e.icon;return(0,r.jsxs)(i(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,r.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),(0,r.jsxs)("div",{className:"lg:pl-64",children:[(0,r.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,r.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>o(!0),children:(0,r.jsx)(b.A,{className:"h-6 w-6"})}),(0,r.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,r.jsx)("div",{className:"flex flex-1"}),(0,r.jsx)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:[null==l?void 0:l.first_name," ",null==l?void 0:l.last_name]}),(0,r.jsx)("div",{className:"text-gray-500",children:null==l||null==(s=l.role)?void 0:s.name})]}),(0,r.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(j.A,{className:"h-5 w-5"})})]})})]})]}),(0,r.jsx)("main",{className:"py-6",children:(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})]})]})}},78874:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},85710:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(71847).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},90126:(e,s,t)=>{Promise.resolve().then(t.bind(t,60015))}},e=>{e.O(0,[310,706,441,255,358],()=>e(e.s=90126)),_N_E=e.O()}]);
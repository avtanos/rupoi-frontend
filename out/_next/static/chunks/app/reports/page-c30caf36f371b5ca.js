(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{16566:(e,s,t)=>{Promise.resolve().then(t.bind(t,29615))},29615:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>v});var a=t(95155),r=t(12115),l=t(64615),i=t(78894),c=t(26991),d=t(98128),x=t(68425),n=t(47734),m=t(73697),h=t(23508),o=t(16533),p=t(78765),y=t(12235),g=t(69386),j=t(89715),u=t(39867),f=t(33);let N=["#3B82F6","#10B981","#F59E0B","#EF4444"];function v(){let[e,s]=(0,r.useState)([]),[t,v]=(0,r.useState)([]),[w,b]=(0,r.useState)(!0);(0,r.useEffect)(()=>{_()},[]);let _=async()=>{try{b(!0);let[e,t]=await Promise.all([i.u.getLOVZReport(),i.u.getManufacturedReport()]);s(e),v(t)}catch(e){console.error("Failed to load reports:",e)}finally{b(!1)}};return w?(0,a.jsx)(l.A,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):(0,a.jsx)(l.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Отчетность"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Формирование и просмотр отчетов по деятельности организации"})]})}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(j.A,{className:"h-6 w-6 text-primary-600 mr-3"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Отчет по ЛОВЗ"})]}),(0,a.jsxs)("button",{onClick:()=>{console.log("Exporting LOVZ report...")},className:"btn btn-primary",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Экспорт"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Пациенты по регионам"}),(0,a.jsx)(c.u,{width:"100%",height:300,children:(0,a.jsxs)(d.E,{data:e,children:[(0,a.jsx)(x.d,{strokeDasharray:"3 3"}),(0,a.jsx)(n.W,{dataKey:"region"}),(0,a.jsx)(m.h,{}),(0,a.jsx)(h.m,{}),(0,a.jsx)(o.y,{dataKey:"total_patients",fill:"#3B82F6"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Распределение по группам инвалидности"}),(0,a.jsx)(c.u,{width:"100%",height:300,children:(0,a.jsxs)(p.r,{children:[(0,a.jsx)(y.F,{data:[{name:"I группа",value:e.reduce((e,s)=>e+s.disability_groups.group_1,0)},{name:"II группа",value:e.reduce((e,s)=>e+s.disability_groups.group_2,0)},{name:"III группа",value:e.reduce((e,s)=>e+s.disability_groups.group_3,0)},{name:"Ребенок-инвалид",value:e.reduce((e,s)=>e+s.disability_groups.child_disabled,0)}],cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,value:t}=e;return"".concat(s,": ").concat(t)},outerRadius:80,fill:"#8884d8",dataKey:"value",children:[0,1,2,3].map((e,s)=>(0,a.jsx)(g.f,{fill:N[s%N.length]},"cell-".concat(s)))}),(0,a.jsx)(h.m,{})]})})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Детальные данные по регионам"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Регион"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Всего пациентов"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Новые"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Активные"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"В архиве"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.region}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.total_patients}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.new_patients}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.active_patients}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.archived_patients})]},s))})]})})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"h-6 w-6 text-primary-600 mr-3"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Отчет по изготовленным изделиям"})]}),(0,a.jsxs)("button",{onClick:()=>{console.log("Exporting manufactured report...")},className:"btn btn-primary",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Экспорт"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Заказы по месяцам"}),(0,a.jsx)(c.u,{width:"100%",height:300,children:(0,a.jsxs)(d.E,{data:t,children:[(0,a.jsx)(x.d,{strokeDasharray:"3 3"}),(0,a.jsx)(n.W,{dataKey:"month"}),(0,a.jsx)(m.h,{}),(0,a.jsx)(h.m,{}),(0,a.jsx)(o.y,{dataKey:"total_orders",fill:"#10B981"})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Распределение по типам"}),(0,a.jsx)(c.u,{width:"100%",height:300,children:(0,a.jsxs)(p.r,{children:[(0,a.jsx)(y.F,{data:[{name:"Протезы",value:t.reduce((e,s)=>e+s.orders_by_type.prosthesis,0)},{name:"Обувь",value:t.reduce((e,s)=>e+s.orders_by_type.shoes,0)},{name:"Ортопедические",value:t.reduce((e,s)=>e+s.orders_by_type.orthopedic,0)},{name:"Ремонт",value:t.reduce((e,s)=>e+s.orders_by_type.repair,0)}],cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,value:t}=e;return"".concat(s,": ").concat(t)},outerRadius:80,fill:"#8884d8",dataKey:"value",children:[0,1,2,3].map((e,s)=>(0,a.jsx)(g.f,{fill:N[s%N.length]},"cell-".concat(s)))}),(0,a.jsx)(h.m,{})]})})]})]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-4",children:"Детальные данные по месяцам"}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Месяц"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Всего заказов"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Выполнено"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"В работе"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Выручка"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.month}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.total_orders}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.completed_orders}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.in_progress_orders}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.total_revenue.toLocaleString("ru-RU")," сом"]})]},s))})]})})]})]})]})})}},39867:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},64615:(e,s,t)=>{"use strict";t.d(s,{A:()=>v});var a=t(95155),r=t(12115),l=t(52619),i=t.n(l),c=t(95706),d=t(65993),x=t(91169),n=t(89715),m=t(7744),h=t(87066),o=t(26617),p=t(33),y=t(89559),g=t(15870),j=t(65229),u=t(9540),f=t(84926);let N=[{name:"Главная",href:"/",icon:d.A},{name:"Картотека",href:"/carts",icon:x.A},{name:"Заказы",href:"/orders",icon:n.A},{name:"Медицинский отдел",href:"/medical",icon:m.A},{name:"Накладные",href:"/overheads",icon:h.A},{name:"Склад",href:"/warehouse",icon:o.A},{name:"Отчеты",href:"/reports",icon:p.A},{name:"Интеграция",href:"/integration",icon:y.A},{name:"Настройки",href:"/settings",icon:g.A}];function v(e){var s;let{children:t}=e,{user:l,logout:d}=(0,c.A)(),[x,n]=(0,r.useState)(!1),m=async()=>{try{await d()}catch(e){console.error("Logout failed:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(x?"block":"hidden"),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>n(!1)}),(0,a.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"}),(0,a.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(j.A,{className:"h-6 w-6"})})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:N.map(e=>{let s=e.icon;return(0,a.jsxs)(i(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,a.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),(0,a.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,a.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,a.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"})}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:N.map(e=>{let s=e.icon;return(0,a.jsxs)(i(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,a.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),(0,a.jsxs)("div",{className:"lg:pl-64",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,a.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>n(!0),children:(0,a.jsx)(u.A,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,a.jsx)("div",{className:"flex flex-1"}),(0,a.jsx)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:[null==l?void 0:l.first_name," ",null==l?void 0:l.last_name]}),(0,a.jsx)("div",{className:"text-gray-500",children:null==l||null==(s=l.role)?void 0:s.name})]}),(0,a.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(f.A,{className:"h-5 w-5"})})]})})]})]}),(0,a.jsx)("main",{className:"py-6",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})]})]})}}},e=>{e.O(0,[310,941,706,441,255,358],()=>e(e.s=16566)),_N_E=e.O()}]);
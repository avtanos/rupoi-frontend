(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{6132:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11010:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},42529:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},52056:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},57828:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},63581:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},64615:(e,s,t)=>{"use strict";t.d(s,{A:()=>N});var a=t(95155),l=t(12115),r=t(52619),n=t.n(r),i=t(95706),c=t(65993),d=t(91169),x=t(89715),m=t(7744),o=t(87066),u=t(26617),h=t(33),y=t(89559),g=t(15870),p=t(65229),j=t(9540),b=t(84926);let f=[{name:"Главная",href:"/",icon:c.A},{name:"Картотека",href:"/carts",icon:d.A},{name:"Заказы",href:"/orders",icon:x.A},{name:"Медицинский отдел",href:"/medical",icon:m.A},{name:"Накладные",href:"/overheads",icon:o.A},{name:"Склад",href:"/warehouse",icon:u.A},{name:"Отчеты",href:"/reports",icon:h.A},{name:"Интеграция",href:"/integration",icon:y.A},{name:"Настройки",href:"/settings",icon:g.A}];function N(e){var s;let{children:t}=e,{user:r,logout:c}=(0,i.A)(),[d,x]=(0,l.useState)(!1),m=async()=>{try{await c()}catch(e){console.error("Logout failed:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(d?"block":"hidden"),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>x(!1)}),(0,a.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"}),(0,a.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(p.A,{className:"h-6 w-6"})})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:f.map(e=>{let s=e.icon;return(0,a.jsxs)(n(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,a.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),(0,a.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,a.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,a.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"})}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:f.map(e=>{let s=e.icon;return(0,a.jsxs)(n(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,a.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),(0,a.jsxs)("div",{className:"lg:pl-64",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,a.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>x(!0),children:(0,a.jsx)(j.A,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,a.jsx)("div",{className:"flex flex-1"}),(0,a.jsx)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:[null==r?void 0:r.first_name," ",null==r?void 0:r.last_name]}),(0,a.jsx)("div",{className:"text-gray-500",children:null==r||null==(s=r.role)?void 0:s.name})]}),(0,a.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(b.A,{className:"h-5 w-5"})})]})})]})]}),(0,a.jsx)("main",{className:"py-6",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})]})]})}},71118:(e,s,t)=>{Promise.resolve().then(t.bind(t,96024))},71360:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},78874:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},86651:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},96024:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var a=t(95155),l=t(12115),r=t(64615),n=t(78894),i=t(42529),c=t(52056),d=t(78874),x=t(26617),m=t(65229),o=t(71847);let u=(0,o.A)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),h=(0,o.A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);function y(e){var s;let{item:t,onClose:l}=e;if(!t)return null;let r=t.quantity<=t.min_quantity&&t.quantity>0,n=0===t.quantity;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Позиция инвентаря"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[t.article," - ",t.name]})]})]}),(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(m.A,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"Основная информация"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u,{className:"h-4 w-4 text-blue-600 mr-2"}),(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Артикул:"}),(0,a.jsx)("span",{className:"ml-2 text-blue-700 font-mono",children:t.article})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 text-blue-600 mr-2"}),(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Наименование:"}),(0,a.jsx)("span",{className:"ml-2 text-blue-700",children:t.name})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Категория:"}),(0,a.jsx)("span",{className:"ml-2 text-blue-700",children:t.category})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h,{className:"h-4 w-4 text-blue-600 mr-2"}),(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Цена:"}),(0,a.jsxs)("span",{className:"ml-2 text-blue-700 font-mono",children:[t.price.toLocaleString("ru-RU")," сом"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-green-900 mb-3",children:"Количественные показатели"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-700",children:t.quantity}),(0,a.jsxs)("div",{className:"text-green-600",children:["Текущее количество (",t.unit,")"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-700",children:t.min_quantity}),(0,a.jsxs)("div",{className:"text-orange-600",children:["Минимальный запас (",t.unit,")"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(r?"text-yellow-700":"text-green-700"),children:t.quantity-t.min_quantity}),(0,a.jsxs)("div",{className:r?"text-yellow-600":"text-green-600",children:["Резерв (",t.unit,")"]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Статус и предупреждения"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"Статус:"}),(0,a.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"in_stock":return(0,a.jsx)(i.A,{className:"h-5 w-5 text-green-600"});case"low_stock":return(0,a.jsx)(c.A,{className:"h-5 w-5 text-yellow-600"});case"out_of_stock":return(0,a.jsx)(d.A,{className:"h-5 w-5 text-red-600"});default:return(0,a.jsx)(x.A,{className:"h-5 w-5 text-gray-600"})}})(t.status),(0,a.jsx)("span",{className:"ml-2 px-3 py-1 rounded-full text-sm font-medium ".concat((e=>{switch(e){case"in_stock":return"bg-green-100 text-green-800";case"low_stock":return"bg-yellow-100 text-yellow-800";case"out_of_stock":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(t.status)),children:{in_stock:"В наличии",low_stock:"Критический запас",out_of_stock:"Нет в наличии"}[s=t.status]||s})]})]}),n&&(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(d.A,{className:"h-5 w-5 text-red-600 mr-2"}),(0,a.jsx)("span",{className:"text-red-800 font-medium",children:"Товар отсутствует на складе"})]}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:"Необходимо пополнить склад для продолжения работы"})]}),r&&!n&&(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-yellow-600 mr-2"}),(0,a.jsx)("span",{className:"text-yellow-800 font-medium",children:"Критический запас"})]}),(0,a.jsx)("p",{className:"text-yellow-700 text-sm mt-1",children:"Количество товара приближается к минимальному уровню. Рекомендуется пополнить склад."})]}),!r&&!n&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(i.A,{className:"h-5 w-5 text-green-600 mr-2"}),(0,a.jsx)("span",{className:"text-green-800 font-medium",children:"Запас в норме"})]}),(0,a.jsx)("p",{className:"text-green-700 text-sm mt-1",children:"Количество товара достаточное для нормальной работы"})]})]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-purple-900 mb-3",children:"Рекомендации"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-purple-800",children:[n?(0,a.jsx)("p",{children:"• Срочно заказать товар у поставщика"}):r?(0,a.jsx)("p",{children:"• Запланировать заказ товара в ближайшее время"}):(0,a.jsx)("p",{children:"• Текущий запас достаточен, мониторить уровень остатков"}),(0,a.jsx)("p",{children:"• Регулярно проверять актуальность цен"}),(0,a.jsx)("p",{children:"• Следить за сроками годности (если применимо)"})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,a.jsx)("button",{onClick:l,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",children:"Закрыть"})})]})})}var g=t(6132);let p=(0,o.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),j=["Протезы","Обувь","Ортопедические изделия","Материалы","Комплектующие","Инструменты","Прочее"],b=["шт","пара","кг","м","л","упак","компл"];function f(e){let{item:s,onClose:t,onSave:r}=e,[i,c]=(0,l.useState)({article:"",name:"",category:"",quantity:0,unit:"шт",min_quantity:0,price:0}),[d,o]=(0,l.useState)(!1),[u,h]=(0,l.useState)({});(0,l.useEffect)(()=>{s&&c({article:s.article,name:s.name,category:s.category,quantity:s.quantity,unit:s.unit,min_quantity:s.min_quantity,price:s.price})},[s]);let y=async e=>{if(e.preventDefault(),(()=>{let e={};return i.article.trim()||(e.article="Артикул обязателен"),i.name.trim()||(e.name="Наименование обязательно"),i.category.trim()||(e.category="Категория обязательна"),i.quantity<0&&(e.quantity="Количество не может быть отрицательным"),i.min_quantity<0&&(e.min_quantity="Минимальный запас не может быть отрицательным"),i.price<0&&(e.price="Цена не может быть отрицательной"),h(e),0===Object.keys(e).length})())try{if(o(!0),s){let e=await n.u.updateInventoryItem(s.id,i);r(e)}else{let e=await n.u.createInventoryItem(i);r(e)}t()}catch(e){console.error("Ошибка сохранения позиции:",e)}finally{o(!1)}},f=(e,s)=>{c(t=>({...t,[e]:s})),u[e]&&h(s=>({...s,[e]:""}))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:s?"Редактировать позицию":"Добавить позицию"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:s?"Артикул: ".concat(s.article):"Новая позиция инвентаря"})]})]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(m.A,{className:"h-6 w-6"})})]}),(0,a.jsxs)("form",{onSubmit:y,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Основная информация"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Артикул *"}),(0,a.jsx)("input",{type:"text",value:i.article,onChange:e=>f("article",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(u.article?"border-red-500":"border-gray-300"),placeholder:"Введите артикул"}),u.article&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),u.article]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Наименование *"}),(0,a.jsx)("input",{type:"text",value:i.name,onChange:e=>f("name",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(u.name?"border-red-500":"border-gray-300"),placeholder:"Введите наименование"}),u.name&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),u.name]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Категория *"}),(0,a.jsxs)("select",{value:i.category,onChange:e=>f("category",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(u.category?"border-red-500":"border-gray-300"),children:[(0,a.jsx)("option",{value:"",children:"Выберите категорию"}),j.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),u.category&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),u.category]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Единица измерения"}),(0,a.jsx)("select",{value:i.unit,onChange:e=>f("unit",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:b.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Количественные показатели"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Количество"}),(0,a.jsx)("input",{type:"number",min:"0",value:i.quantity,onChange:e=>f("quantity",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(u.quantity?"border-red-500":"border-gray-300")}),u.quantity&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),u.quantity]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Минимальный запас"}),(0,a.jsx)("input",{type:"number",min:"0",value:i.min_quantity,onChange:e=>f("min_quantity",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(u.min_quantity?"border-red-500":"border-gray-300")}),u.min_quantity&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),u.min_quantity]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Цена (сом)"}),(0,a.jsx)("input",{type:"number",min:"0",step:"0.01",value:i.price,onChange:e=>f("price",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(u.price?"border-red-500":"border-gray-300")}),u.price&&(0,a.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 mr-1"}),u.price]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Предварительный статус"}),(0,a.jsx)("div",{className:"text-sm",children:i.quantity>i.min_quantity?(0,a.jsxs)("div",{className:"flex items-center text-green-700",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),"В наличии - запас достаточный"]}):i.quantity>0?(0,a.jsxs)("div",{className:"flex items-center text-yellow-700",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"Критический запас - необходимо пополнить"]}):(0,a.jsxs)("div",{className:"flex items-center text-red-700",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),"Нет в наличии - срочно заказать"]})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",children:"Отмена"}),(0,a.jsx)("button",{type:"submit",onClick:y,disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Сохранение..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p,{className:"h-4 w-4 mr-2"}),s?"Сохранить изменения":"Создать позицию"]})})]})]})})}function N(e){let{item:s,onClose:t,onIssue:r}=e,[i,d]=(0,l.useState)({quantity:1,issued_by:"",notes:"",order_id:""}),[o,u]=(0,l.useState)(!1),[h,y]=(0,l.useState)({});(0,l.useEffect)(()=>{s&&d(e=>({...e,quantity:Math.min(1,s.quantity)}))},[s]);let g=async e=>{if(e.preventDefault(),s&&(()=>{let e={};return i.quantity<=0&&(e.quantity="Количество должно быть больше 0"),i.quantity>((null==s?void 0:s.quantity)||0)&&(e.quantity="Недостаточно товара на складе"),i.issued_by.trim()||(e.issued_by="ФИО ответственного обязательно"),y(e),0===Object.keys(e).length})())try{u(!0);let e={inventory_item_id:s.id,quantity:i.quantity,issued_by:i.issued_by,notes:i.notes,order_id:i.order_id||null};await n.u.issueFromWarehouse(e),r(),t()}catch(e){console.error("Ошибка выдачи со склада:",e)}finally{u(!1)}},p=(e,s)=>{d(t=>({...t,[e]:s})),h[e]&&y(s=>({...s,[e]:""}))};if(!s)return null;let j=s.quantity<=s.min_quantity&&s.quantity>0,b=0===s.quantity;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"h-6 w-6 text-blue-600 mr-3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Выдача со склада"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[s.article," - ",s.name]})]})]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(m.A,{className:"h-6 w-6"})})]}),(0,a.jsxs)("form",{onSubmit:g,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-3",children:"Информация о товаре"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Артикул:"}),(0,a.jsx)("span",{className:"text-blue-700 font-mono",children:s.article})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Наименование:"}),(0,a.jsx)("span",{className:"text-blue-700",children:s.name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Доступно:"}),(0,a.jsxs)("span",{className:"text-blue-700 font-bold",children:[s.quantity," ",s.unit]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-blue-800",children:"Минимальный запас:"}),(0,a.jsxs)("span",{className:"text-blue-700",children:[s.min_quantity," ",s.unit]})]})]}),b&&(0,a.jsxs)("div",{className:"mt-3 bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-red-600 mr-2"}),(0,a.jsx)("span",{className:"text-red-800 font-medium",children:"Товар отсутствует на складе"})]}),(0,a.jsx)("p",{className:"text-red-700 text-sm mt-1",children:"Выдача невозможна. Необходимо пополнить склад."})]}),j&&!b&&(0,a.jsxs)("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(c.A,{className:"h-5 w-5 text-yellow-600 mr-2"}),(0,a.jsx)("span",{className:"text-yellow-800 font-medium",children:"Критический запас"})]}),(0,a.jsx)("p",{className:"text-yellow-700 text-sm mt-1",children:"После выдачи количество товара будет критически низким."})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Данные выдачи"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Количество для выдачи *"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"number",min:"1",max:s.quantity,value:i.quantity,onChange:e=>p("quantity",parseInt(e.target.value)||1),className:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(h.quantity?"border-red-500":"border-gray-300"),disabled:b}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:s.unit})]}),h.quantity&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.quantity})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ответственный за выдачу *"}),(0,a.jsx)("input",{type:"text",value:i.issued_by,onChange:e=>p("issued_by",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(h.issued_by?"border-red-500":"border-gray-300"),placeholder:"ФИО ответственного лица"}),h.issued_by&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.issued_by})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер заказа (опционально)"}),(0,a.jsx)("input",{type:"text",value:i.order_id,onChange:e=>p("order_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ORD-2025-XXXX"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Примечания"}),(0,a.jsx)("textarea",{value:i.notes,onChange:e=>p("notes",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Дополнительная информация о выдаче"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Предварительный расчет"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"Текущий остаток:"}),(0,a.jsxs)("span",{className:"text-gray-700",children:[s.quantity," ",s.unit]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"К выдаче:"}),(0,a.jsxs)("span",{className:"text-gray-700",children:[i.quantity," ",s.unit]})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t border-gray-300 pt-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-800",children:"Остаток после выдачи:"}),(0,a.jsxs)("span",{className:"font-bold ".concat(s.quantity-i.quantity<=s.min_quantity?"text-yellow-700":"text-gray-700"),children:[s.quantity-i.quantity," ",s.unit]})]}),s.quantity-i.quantity<=s.min_quantity&&(0,a.jsx)("p",{className:"text-yellow-700 text-xs mt-2",children:"⚠️ После выдачи остаток будет критически низким"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",children:"Отмена"}),(0,a.jsx)("button",{type:"submit",onClick:g,disabled:o||b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Выдача..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Выдать со склада"]})})]})]})})}var v=t(63581),w=t(6191),k=t(86651),A=t(71360),_=t(57828),q=t(11010);let C=(0,o.A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);function S(){let[e,s]=(0,l.useState)([]),[t,m]=(0,l.useState)(!0),[o,u]=(0,l.useState)(""),[h,g]=(0,l.useState)("all"),[p,j]=(0,l.useState)("all"),[b,S]=(0,l.useState)(!1),[M,z]=(0,l.useState)(!1),[I,F]=(0,l.useState)(!1),[L,E]=(0,l.useState)(!1),[H,O]=(0,l.useState)(null),[V,X]=(0,l.useState)([]);(0,l.useEffect)(()=>{D()},[]);let D=async()=>{try{m(!0);let e=await n.u.getInventory();s(e)}catch(e){console.error("Failed to load inventory:",e)}finally{m(!1)}},R=async e=>{if(window.confirm('Вы уверены, что хотите удалить позицию "'.concat(e.name,'"?')))try{await n.u.deleteInventoryItem(e.id),await D()}catch(e){console.error("Failed to delete item:",e)}},P=async e=>{await D()},U=async()=>{await D()},T=async()=>{if(0!==V.length&&window.confirm("Вы уверены, что хотите удалить ".concat(V.length," позиций?")))try{for(let e of V)await n.u.deleteInventoryItem(e);X([]),await D()}catch(e){console.error("Failed to delete items:",e)}},B=e.filter(e=>{let s=e.article.toLowerCase().includes(o.toLowerCase())||e.name.toLowerCase().includes(o.toLowerCase())||e.category.toLowerCase().includes(o.toLowerCase()),t="all"===h||e.status===h,a="all"===p||e.category===p;return s&&t&&a});return(0,a.jsx)(r.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Склад"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Управление складскими запасами и готовыми изделиями"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("button",{onClick:()=>S(!b),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Фильтры"]}),(0,a.jsxs)("button",{onClick:()=>{O(null),F(!0)},className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)(w.A,{className:"h-4 w-4 mr-2"}),"Добавить позицию"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-blue-100",children:(0,a.jsx)(x.A,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Всего позиций"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-green-100",children:(0,a.jsx)(i.A,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"В наличии"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>"in_stock"===e.status).length})]})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-yellow-100",children:(0,a.jsx)(c.A,{className:"h-6 w-6 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Критический запас"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>"low_stock"===e.status).length})]})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-red-100",children:(0,a.jsx)(d.A,{className:"h-6 w-6 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Нет в наличии"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>"out_of_stock"===e.status).length})]})]})})]}),b&&(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Фильтры"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Поиск"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(k.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:o,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Поиск по артикулу, названию..."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Статус"}),(0,a.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"Все статусы"}),(0,a.jsx)("option",{value:"in_stock",children:"В наличии"}),(0,a.jsx)("option",{value:"low_stock",children:"Критический запас"}),(0,a.jsx)("option",{value:"out_of_stock",children:"Нет в наличии"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Категория"}),(0,a.jsxs)("select",{value:p,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"Все категории"}),[...new Set(e.map(e=>e.category))].map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]})]}),V.length>0&&(0,a.jsx)("div",{className:"card p-4 bg-blue-50 border border-blue-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-800",children:["Выбрано позиций: ",V.length]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)("button",{onClick:T,className:"px-3 py-1 text-sm font-medium text-red-700 bg-red-100 border border-red-300 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,a.jsx)(A.A,{className:"h-4 w-4 mr-1 inline"}),"Удалить выбранные"]}),(0,a.jsx)("button",{onClick:()=>X([]),className:"px-3 py-1 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Отменить выбор"})]})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)("input",{type:"checkbox",checked:V.length===B.length&&B.length>0,onChange:()=>{V.length===B.length?X([]):X(B.map(e=>e.id))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Артикул"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Наименование"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Категория"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Количество"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Мин. запас"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Цена"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:9,className:"px-6 py-4 text-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"})})}):0===B.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:0===e.length?"Инвентарь не найден":"Нет позиций, соответствующих фильтрам"})}):B.map(e=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(V.includes(e.id)?"bg-blue-50":""),children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("input",{type:"checkbox",checked:V.includes(e.id),onChange:()=>{var s;return s=e.id,void X(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s])},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.article}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:e.quantity}),(0,a.jsx)("span",{className:"ml-1 text-gray-400",children:e.unit})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.min_quantity," ",e.unit]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"in_stock":return(0,a.jsx)(i.A,{className:"h-4 w-4 text-green-600"});case"low_stock":return(0,a.jsx)(c.A,{className:"h-4 w-4 text-yellow-600"});case"out_of_stock":return(0,a.jsx)(d.A,{className:"h-4 w-4 text-red-600"});default:return(0,a.jsx)(x.A,{className:"h-4 w-4 text-gray-600"})}})(e.status),(0,a.jsx)("span",{className:"ml-2 ".concat({in_stock:"badge badge-success",low_stock:"badge badge-warning",out_of_stock:"badge badge-danger"}[e.status]||"badge badge-info"),children:{in_stock:"В наличии",low_stock:"Критический запас",out_of_stock:"Нет в наличии"}[s=e.status]||s})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.price.toLocaleString("ru-RU")," сом"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("button",{onClick:()=>{O(e),z(!0)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-100",title:"Просмотр",children:(0,a.jsx)(_.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>{O(e),F(!0)},className:"text-yellow-600 hover:text-yellow-900 p-1 rounded hover:bg-yellow-100",title:"Редактировать",children:(0,a.jsx)(q.A,{className:"h-4 w-4"})}),e.quantity>0&&(0,a.jsx)("button",{onClick:()=>{O(e),E(!0)},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-100",title:"Выдать со склада",children:(0,a.jsx)(C,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>R(e),className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-100",title:"Удалить",children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),M&&(0,a.jsx)(y,{item:H,onClose:()=>{z(!1),O(null)}}),I&&(0,a.jsx)(f,{item:H,onClose:()=>{F(!1),O(null)},onSave:P}),L&&(0,a.jsx)(N,{item:H,onClose:()=>{E(!1),O(null)},onIssue:U})]})})}}},e=>{e.O(0,[310,706,441,255,358],()=>e(e.s=71118)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11010:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},16485:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},20508:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},57828:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},64615:(e,s,t)=>{"use strict";t.d(s,{A:()=>v});var a=t(95155),r=t(12115),l=t(52619),i=t.n(l),n=t(95706),d=t(65993),c=t(91169),o=t(89715),m=t(7744),x=t(87066),u=t(26617),h=t(33),g=t(89559),p=t(15870),b=t(65229),f=t(9540),y=t(84926);let j=[{name:"Главная",href:"/",icon:d.A},{name:"Картотека",href:"/carts",icon:c.A},{name:"Заказы",href:"/orders",icon:o.A},{name:"Медицинский отдел",href:"/medical",icon:m.A},{name:"Накладные",href:"/overheads",icon:x.A},{name:"Склад",href:"/warehouse",icon:u.A},{name:"Отчеты",href:"/reports",icon:h.A},{name:"Интеграция",href:"/integration",icon:g.A},{name:"Настройки",href:"/settings",icon:p.A}];function v(e){var s;let{children:t}=e,{user:l,logout:d}=(0,n.A)(),[c,o]=(0,r.useState)(!1),m=async()=>{try{await d()}catch(e){console.error("Logout failed:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(c?"block":"hidden"),children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>o(!1)}),(0,a.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"}),(0,a.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(b.A,{className:"h-6 w-6"})})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:j.map(e=>{let s=e.icon;return(0,a.jsxs)(i(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,a.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),(0,a.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,a.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,a.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"})}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:j.map(e=>{let s=e.icon;return(0,a.jsxs)(i(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,a.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),(0,a.jsxs)("div",{className:"lg:pl-64",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,a.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>o(!0),children:(0,a.jsx)(f.A,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,a.jsx)("div",{className:"flex flex-1"}),(0,a.jsx)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:[null==l?void 0:l.first_name," ",null==l?void 0:l.last_name]}),(0,a.jsx)("div",{className:"text-gray-500",children:null==l||null==(s=l.role)?void 0:s.name})]}),(0,a.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(y.A,{className:"h-5 w-5"})})]})})]})]}),(0,a.jsx)("main",{className:"py-6",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})]})]})}},71360:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},71871:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},85732:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(95155),r=t(12115),l=t(64615),i=t(78894);function n(e){let{cart:s,onSave:t,onCancel:l}=e,[n,d]=(0,r.useState)({first_name:"",name:"",parent_name:"",sex:"male",birth_date:"",inn:"",document_type:"Паспорт",document_series:"",document_number:"",document_issue_date:"",document_issued_by:"",lovz_type:"",lovz_group:1,disability_cause:"",operation_info:"",additional_info:"",note:"",registration_oblast_id:1,registration_raion_id:1,registration_locality_id:1,living_oblast_id:1,living_raion_id:1,living_locality_id:1,registration_address:"",living_address:"",reference_msec:"",pension_certificate_number:"",pension_certificate_issue_date:"",msec_id:1,pension_certificate_indefinitely:!1,pension_certificate_term_end_date:"",work_place:"",phone_number:"",additional_phone_number:"",medical_department_direct_date:"",deregistration_date:"",deregistration_reason:"",...s}),[c,o]=(0,r.useState)([]),[m,x]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[g,p]=(0,r.useState)([]),[b,f]=(0,r.useState)([]),[y,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{let[e,s]=await Promise.all([i.u.getOblasts(),i.u.getDisabilities()]);o(e),f(s)}catch(e){console.error("Ошибка загрузки справочников:",e)}},N=async(e,s)=>{d(t=>({...t,[e]:s}));try{let e=await i.u.getRaions(s);x(e)}catch(e){console.error("Ошибка загрузки районов:",e)}},w=async(e,s)=>{d(t=>({...t,[e]:s}));try{let e=await i.u.getLocalities(s);h(e)}catch(e){console.error("Ошибка загрузки населенных пунктов:",e)}},_=async(e,s)=>{d(t=>({...t,[e]:s}));try{let e=await i.u.getMSECs(s);p(e)}catch(e){console.error("Ошибка загрузки МСЭК:",e)}},k=async e=>{e.preventDefault(),j(!0);try{await t(n)}catch(e){console.error("Ошибка сохранения карточки:",e)}finally{j(!1)}};return(0,a.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Основная информация"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Фамилия *"}),(0,a.jsx)("input",{type:"text",required:!0,value:n.first_name||"",onChange:e=>d(s=>({...s,first_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Имя *"}),(0,a.jsx)("input",{type:"text",required:!0,value:n.name||"",onChange:e=>d(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Отчество"}),(0,a.jsx)("input",{type:"text",value:n.parent_name||"",onChange:e=>d(s=>({...s,parent_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Пол *"}),(0,a.jsxs)("select",{required:!0,value:n.sex||"male",onChange:e=>d(s=>({...s,sex:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"male",children:"Мужской"}),(0,a.jsx)("option",{value:"female",children:"Женский"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата рождения *"}),(0,a.jsx)("input",{type:"date",required:!0,value:n.birth_date||"",onChange:e=>d(s=>({...s,birth_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ИНН *"}),(0,a.jsx)("input",{type:"text",required:!0,value:n.inn||"",onChange:e=>d(s=>({...s,inn:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Группа ЛОВЗ *"}),(0,a.jsxs)("select",{required:!0,value:n.lovz_group||1,onChange:e=>d(s=>({...s,lovz_group:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:1,children:"1 группа"}),(0,a.jsx)("option",{value:2,children:"2 группа"}),(0,a.jsx)("option",{value:3,children:"3 группа"})]})]}),(0,a.jsxs)("div",{className:"col-span-1",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Причина инвалидности"}),(0,a.jsxs)("select",{value:n.disability_cause||"",onChange:e=>d(s=>({...s,disability_cause:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Выберите причину"}),(0,a.jsx)("option",{value:"Травма",children:"Травма"}),(0,a.jsx)("option",{value:"Врожденный",children:"Врожденный"}),(0,a.jsx)("option",{value:"Заболевание",children:"Заболевание"})]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Где и когда оперирован"}),(0,a.jsx)("textarea",{value:n.operation_info||"",onChange:e=>d(s=>({...s,operation_info:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Опишите где и когда проводились операции"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Дополнения"}),(0,a.jsx)("textarea",{value:n.additional_info||"",onChange:e=>d(s=>({...s,additional_info:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Дополнительная информация о пациенте"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Документы"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Тип документа *"}),(0,a.jsxs)("select",{required:!0,value:n.document_type||"Паспорт",onChange:e=>d(s=>({...s,document_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"Паспорт",children:"Паспорт"}),(0,a.jsx)("option",{value:"Свидетельство о рождении",children:"Свидетельство о рождении"}),(0,a.jsx)("option",{value:"Удостоверение личности",children:"Удостоверение личности"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Серия"}),(0,a.jsx)("input",{type:"text",value:n.document_series||"",onChange:e=>d(s=>({...s,document_series:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Номер *"}),(0,a.jsx)("input",{type:"text",required:!0,value:n.document_number||"",onChange:e=>d(s=>({...s,document_number:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата выдачи"}),(0,a.jsx)("input",{type:"date",value:n.document_issue_date||"",onChange:e=>d(s=>({...s,document_issue_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Кем выдан"}),(0,a.jsx)("input",{type:"text",value:n.document_issued_by||"",onChange:e=>d(s=>({...s,document_issued_by:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Адресные данные"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"Адрес регистрации"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Область *"}),(0,a.jsx)("select",{required:!0,value:n.registration_oblast_id||1,onChange:e=>N("registration_oblast_id",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Район *"}),(0,a.jsx)("select",{required:!0,value:n.registration_raion_id||1,onChange:e=>w("registration_raion_id",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:m.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Населенный пункт *"}),(0,a.jsx)("select",{required:!0,value:n.registration_locality_id||1,onChange:e=>_("registration_locality_id",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:u.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Полный адрес регистрации"}),(0,a.jsx)("input",{type:"text",value:n.registration_address||"",onChange:e=>d(s=>({...s,registration_address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"Адрес проживания"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Область *"}),(0,a.jsx)("select",{required:!0,value:n.living_oblast_id||1,onChange:e=>N("living_oblast_id",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Район *"}),(0,a.jsx)("select",{required:!0,value:n.living_raion_id||1,onChange:e=>w("living_raion_id",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:m.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Населенный пункт *"}),(0,a.jsx)("select",{required:!0,value:n.living_locality_id||1,onChange:e=>_("living_locality_id",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:u.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Полный адрес проживания"}),(0,a.jsx)("input",{type:"text",value:n.living_address||"",onChange:e=>d(s=>({...s,living_address:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Контактная информация"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Телефон *"}),(0,a.jsx)("input",{type:"tel",required:!0,value:n.phone_number||"",onChange:e=>d(s=>({...s,phone_number:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Дополнительный телефон"}),(0,a.jsx)("input",{type:"tel",value:n.additional_phone_number||"",onChange:e=>d(s=>({...s,additional_phone_number:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Место работы"}),(0,a.jsx)("input",{type:"text",value:n.work_place||"",onChange:e=>d(s=>({...s,work_place:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Отмена"}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:y?"Сохранение...":"Сохранить"})]})]})}var d=t(6191),c=t(16485),o=t(71871),m=t(20508),x=t(7744),u=t(11010),h=t(71360);function g(e){let{cartId:s,directions:t,onUpdate:l}=e,[n,g]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[f,y]=(0,r.useState)({direction_date:"",diagnosis:"",institution:"",doctor_name:"",service_type:""}),j=async()=>{try{p?console.log("Updating direction:",p.id,f):await i.u.addServiceDirection(s,f),g(!1),l()}catch(e){console.error("Failed to save direction:",e)}};return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Направления на услуги"}),(0,a.jsxs)("button",{onClick:()=>{b(null),y({direction_date:new Date().toISOString().split("T")[0],diagnosis:"",institution:"",doctor_name:"",service_type:""}),g(!0)},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Добавить направление"]})]}),0===t.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Направления не добавлены"}):(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{className:"font-medium",children:"Дата:"}),(0,a.jsx)("span",{className:"ml-2",children:new Date(e.direction_date).toLocaleDateString("ru-RU")})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{className:"font-medium",children:"Учреждение:"}),(0,a.jsx)("span",{className:"ml-2",children:e.institution})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(m.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{className:"font-medium",children:"Врач:"}),(0,a.jsx)("span",{className:"ml-2",children:e.doctor_name})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)("span",{className:"font-medium",children:"Вид услуги:"}),(0,a.jsx)("span",{className:"ml-2",children:e.service_type})]})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Диагноз:"})," ",e.diagnosis]})})]}),(0,a.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,a.jsx)("button",{onClick:()=>{b(e),y({direction_date:e.direction_date,diagnosis:e.diagnosis,institution:e.institution,doctor_name:e.doctor_name,service_type:e.service_type}),g(!0)},className:"text-blue-600 hover:text-blue-800",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>{confirm("Удалить направление?")&&console.log("Deleting direction:",e.id)},className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})]})]})},e.id))}),n&&(0,a.jsxs)("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[(0,a.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:p?"Редактировать направление":"Добавить направление"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата направления *"}),(0,a.jsx)("input",{type:"date",value:f.direction_date,onChange:e=>y(s=>({...s,direction_date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Учреждение *"}),(0,a.jsx)("input",{type:"text",value:f.institution,onChange:e=>y(s=>({...s,institution:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Название учреждения",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ФИО врача *"}),(0,a.jsx)("input",{type:"text",value:f.doctor_name,onChange:e=>y(s=>({...s,doctor_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Фамилия И.О.",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Вид услуги *"}),(0,a.jsxs)("select",{value:f.service_type,onChange:e=>y(s=>({...s,service_type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Выберите вид услуги"}),(0,a.jsx)("option",{value:"Протезирование нижней конечности",children:"Протезирование нижней конечности"}),(0,a.jsx)("option",{value:"Протезирование верхней конечности",children:"Протезирование верхней конечности"}),(0,a.jsx)("option",{value:"Ортопедическая обувь",children:"Ортопедическая обувь"}),(0,a.jsx)("option",{value:"Оттобок",children:"Оттобок"}),(0,a.jsx)("option",{value:"Ремонт протеза",children:"Ремонт протеза"}),(0,a.jsx)("option",{value:"Ремонт обуви",children:"Ремонт обуви"}),(0,a.jsx)("option",{value:"Готовые ПОИ",children:"Готовые ПОИ"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Диагноз при направлении *"}),(0,a.jsx)("textarea",{value:f.diagnosis,onChange:e=>y(s=>({...s,diagnosis:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Опишите диагноз",required:!0})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,a.jsx)("button",{onClick:()=>{g(!1),b(null)},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Отмена"}),(0,a.jsx)("button",{onClick:j,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:p?"Обновить":"Добавить"})]})]})]})}var p=t(89715),b=t(65229);function f(e){let{cartId:s,onClose:t,onSave:l}=e,[n,d]=(0,r.useState)({direction_date:new Date().toISOString().split("T")[0],diagnosis:"",msec_certificate:""}),o=async e=>{e.preventDefault();try{let e=await i.u.addRehabilitationDirection(s,n);l(e),t()}catch(e){console.error("Failed to create rehabilitation direction:",e)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 mr-2"}),"Направление на реабилитацию в ЦР ЛОВЗ"]}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(b.A,{className:"h-6 w-6"})})]}),(0,a.jsxs)("form",{onSubmit:o,className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Дата направления *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"date",value:n.direction_date,onChange:e=>d(s=>({...s,direction_date:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Диагноз *"}),(0,a.jsx)("textarea",{value:n.diagnosis,onChange:e=>d(s=>({...s,diagnosis:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Опишите диагноз для направления на реабилитацию",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Справка МСЭК *"}),(0,a.jsx)("textarea",{value:n.msec_certificate,onChange:e=>d(s=>({...s,msec_certificate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Данные справки МСЭК",required:!0})]}),(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m.A,{className:"h-5 w-5 text-blue-600 mr-2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Информация"}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Номер направления будет сгенерирован автоматически в формате ГОД/НОМЕР"})]})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Отмена"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Создать направление"})]})]})]})})}var y=t(86651),j=t(57828);let v=(0,t(71847).A)("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);function N(){let[e,s]=(0,r.useState)([]),[t,c]=(0,r.useState)(!0),[o,m]=(0,r.useState)(""),[h,N]=(0,r.useState)(""),[w,_]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null),[A,S]=(0,r.useState)(null),[q,M]=(0,r.useState)(null),[D,z]=(0,r.useState)([]),[I,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{F()},[o,h]);let F=async()=>{try{c(!0);let e={};o&&(e.search=o),h&&(e.status=h);let t=await i.u.getCarts(e);s(t.results)}catch(e){console.error("Failed to load carts:",e)}finally{c(!1)}},O=e=>{C(e),_(!0)},R=async e=>{try{k?await i.u.updateCart(k.id,e):await i.u.createCart(e),_(!1),C(null),F()}catch(e){console.error("Ошибка сохранения карточки:",e)}},U=()=>{_(!1),C(null)},L=async e=>{try{let s=await i.u.getServiceDirections(e);z(s)}catch(e){console.error("Failed to load service directions:",e)}},P=async e=>{try{let s=await i.u.getRehabilitationDirections(e);E(s)}catch(e){console.error("Failed to load rehabilitation directions:",e)}};return(0,a.jsx)(l.A,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Картотека пациентов"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Управление картотекой пациентов системы протезирования"})]}),(0,a.jsxs)("button",{onClick:()=>{C(null),_(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center",children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Новый пациент"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-blue-100",children:(0,a.jsx)("div",{className:"h-6 w-6 text-blue-600",children:"\uD83D\uDC65"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Всего пациентов"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-green-100",children:(0,a.jsx)("div",{className:"h-6 w-6 text-green-600",children:"✅"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Активных"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>"active"===e.status).length})]})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-yellow-100",children:(0,a.jsx)("div",{className:"h-6 w-6 text-yellow-600",children:"\uD83D\uDCC1"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"В архиве"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>"archived"===e.status).length})]})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-red-100",children:(0,a.jsx)("div",{className:"h-6 w-6 text-red-600",children:"❌"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Неактивных"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>"inactive"===e.status).length})]})]})})]}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(y.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Поиск по ФИО, ПИН, номеру карточки...",className:"input pl-10",value:o,onChange:e=>m(e.target.value)})]})}),(0,a.jsx)("div",{className:"sm:w-48",children:(0,a.jsxs)("select",{className:"input",value:h,onChange:e=>N(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"Все статусы"}),(0,a.jsx)("option",{value:"active",children:"Активные"}),(0,a.jsx)("option",{value:"archived",children:"В архиве"}),(0,a.jsx)("option",{value:"not_registered",children:"Несостоящие"})]})})]})}),(0,a.jsx)("div",{className:"card p-6",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"№ карточки"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ФИО"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата рождения"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ПИН"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Группа"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Телефон"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"})})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500",children:"Пациенты не найдены"})}):e.map(e=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.card_number}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.name," ",e.first_name," ",e.parent_name]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.birth_date?new Date(e.birth_date).toLocaleDateString("ru-RU"):"Не указано"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.inn}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.lovz_group," группа"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.phone_number}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:{active:"badge badge-success",archived:"badge badge-warning",not_registered:"badge badge-danger"}[e.status]||"badge badge-info",children:{active:"Активен",archived:"В архиве",not_registered:"Несостоящий на учете"}[s=e.status]||s})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>O(e),className:"text-blue-600 hover:text-blue-900",title:"Просмотр",children:(0,a.jsx)(j.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>O(e),className:"text-yellow-600 hover:text-yellow-900",title:"Редактировать",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>{var s;S(s=e.id),L(s)},className:"text-green-600 hover:text-green-900",title:"Направления на услуги",children:(0,a.jsx)(x.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{onClick:()=>{var s;M(s=e.id),P(s)},className:"text-purple-600 hover:text-purple-900",title:"Направление на реабилитацию",children:(0,a.jsx)(p.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"text-gray-600 hover:text-gray-900",title:"Архивировать",children:(0,a.jsx)(v,{className:"h-4 w-4"})})]})})]},e.id)})})]})})}),w&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:U}),(0,a.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:(0,a.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:k?"Редактирование карточки пациента":"Создание карточки пациента"}),(0,a.jsx)("button",{onClick:U,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(b.A,{className:"h-6 w-6"})})]}),(0,a.jsx)(n,{cart:k||void 0,onSave:R,onCancel:U})]})})]})}),A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Направления на услуги"}),(0,a.jsx)("button",{onClick:()=>S(null),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(b.A,{className:"h-6 w-6"})})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(g,{cartId:A,directions:D,onUpdate:()=>L(A)})})]})}),q&&(0,a.jsx)(f,{cartId:q,onClose:()=>M(null),onSave:e=>{E(s=>[...s,e]),M(null)}})]})})}},86651:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(71847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},98322:(e,s,t)=>{Promise.resolve().then(t.bind(t,85732))}},e=>{e.O(0,[310,706,441,255,358],()=>e(e.s=98322)),_N_E=e.O()}]);
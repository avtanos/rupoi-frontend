(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{6191:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},11010:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},20596:(e,s,a)=>{Promise.resolve().then(a.bind(a,59645))},57828:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},59645:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>h});var t=a(95155),l=a(12115),r=a(64615),c=a(31322),i=a(6191),d=a(26617),x=a(86651),n=a(57828),m=a(11010);function h(){let[e,s]=(0,l.useState)([]),[a,h]=(0,l.useState)(!0),[o,p]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[u,y]=(0,l.useState)("");(0,l.useEffect)(()=>{N()},[o,g,u]);let N=async()=>{try{h(!0);let e={};o&&(e.search=o),g&&(e.order_type=g),u&&(e.status=u);let a=await c.u.getOrders(e);s(a.results)}catch(e){console.error("Failed to load orders:",e)}finally{h(!1)}};return(0,t.jsx)(r.A,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Управление заказами"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Создание и управление заказами на протезно-ортопедические изделия"})]}),(0,t.jsxs)("button",{className:"btn btn-primary",children:[(0,t.jsx)(i.A,{className:"h-4 w-4 mr-2"}),"Новый заказ"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsx)("div",{className:"card p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-blue-100",children:(0,t.jsx)(d.A,{className:"h-6 w-6 text-blue-600"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Всего заказов"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.length})]})]})}),(0,t.jsx)("div",{className:"card p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-yellow-100",children:(0,t.jsx)("div",{className:"h-6 w-6 text-yellow-600",children:"⚙️"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"В работе"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>2===e.status).length})]})]})}),(0,t.jsx)("div",{className:"card p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-green-100",children:(0,t.jsx)("div",{className:"h-6 w-6 text-green-600",children:"✅"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Готово"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.filter(e=>e.status>=3).length})]})]})}),(0,t.jsx)("div",{className:"card p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0 p-3 rounded-md bg-red-100",children:(0,t.jsx)("div",{className:"h-6 w-6 text-red-600",children:"⚠️"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Просрочено"}),(0,t.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})})]}),(0,t.jsx)("div",{className:"card p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("select",{className:"input",value:g,onChange:e=>j(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Все типы"}),(0,t.jsx)("option",{value:"prosthesis",children:"Протезы"}),(0,t.jsx)("option",{value:"shoes",children:"Обувь"}),(0,t.jsx)("option",{value:"orthopedic",children:"Ортопедические"}),(0,t.jsx)("option",{value:"repair",children:"Ремонт"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("select",{className:"input",value:u,onChange:e=>y(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Все статусы"}),(0,t.jsx)("option",{value:"1",children:"Новый"}),(0,t.jsx)("option",{value:"2",children:"В работе"}),(0,t.jsx)("option",{value:"3",children:"Готов"}),(0,t.jsx)("option",{value:"4",children:"На складе"}),(0,t.jsx)("option",{value:"5",children:"Выдан"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Поиск по номеру, ФИО...",className:"input pl-10",value:o,onChange:e=>p(e.target.value)})]})})]})}),(0,t.jsx)("div",{className:"card p-6",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"№ заказа"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Пациент"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Тип"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Изделие"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Статус"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Дата создания"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Действия"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"})})}):0===e.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500",children:"Заказы не найдены"})}):e.map(e=>{var s;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.number}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.cart.first_name," ",e.cart.last_name]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:{prosthesis:"Протез",shoes:"Обувь",orthopedic:"Ортопедическое",repair:"Ремонт"}[s=e.order_type]||s}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.device_type.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:{1:"badge badge-info",2:"badge badge-warning",3:"badge badge-success",4:"badge badge-success",5:"badge badge-success",6:"badge badge-info"}[e.status]||"badge badge-info",children:{1:"Новый",2:"В работе",3:"Готов",4:"На складе",5:"Выдан",6:"Выдан"}[e.status]||"Неизвестно"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("ru-RU")}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{className:"text-primary-600 hover:text-primary-900",children:(0,t.jsx)(n.A,{className:"h-4 w-4"})}),(0,t.jsx)("button",{className:"text-yellow-600 hover:text-yellow-900",children:(0,t.jsx)(m.A,{className:"h-4 w-4"})})]})})]},e.id)})})]})})})]})})}},64615:(e,s,a)=>{"use strict";a.d(s,{A:()=>N});var t=a(95155),l=a(12115),r=a(52619),c=a.n(r),i=a(95706),d=a(65993),x=a(91169),n=a(89715),m=a(7744),h=a(26617),o=a(33),p=a(15870),g=a(65229),j=a(9540),u=a(84926);let y=[{name:"Главная",href:"/",icon:d.A},{name:"Картотека",href:"/carts",icon:x.A},{name:"Заказы",href:"/orders",icon:n.A},{name:"Медицинский отдел",href:"/medical",icon:m.A},{name:"Склад",href:"/warehouse",icon:h.A},{name:"Отчеты",href:"/reports",icon:o.A},{name:"Настройки",href:"/settings",icon:p.A}];function N(e){var s;let{children:a}=e,{user:r,logout:d}=(0,i.A)(),[x,n]=(0,l.useState)(!1),m=async()=>{try{await d()}catch(e){console.error("Logout failed:",e)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(x?"block":"hidden"),children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>n(!1)}),(0,t.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white",children:[(0,t.jsxs)("div",{className:"flex h-16 items-center justify-between px-4",children:[(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"}),(0,t.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(g.A,{className:"h-6 w-6"})})]}),(0,t.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:y.map(e=>{let s=e.icon;return(0,t.jsxs)(c(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,t.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})]}),(0,t.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,t.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,t.jsx)("div",{className:"flex h-16 items-center px-4",children:(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"РУПИО"})}),(0,t.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:y.map(e=>{let s=e.icon;return(0,t.jsxs)(c(),{href:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,t.jsx)(s,{className:"mr-3 h-5 w-5"}),e.name]},e.name)})})]})}),(0,t.jsxs)("div",{className:"lg:pl-64",children:[(0,t.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,t.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>n(!0),children:(0,t.jsx)(j.A,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[(0,t.jsx)("div",{className:"flex flex-1"}),(0,t.jsxs)("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[(0,t.jsx)("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200"}),(0,t.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"font-medium text-gray-900",children:[null==r?void 0:r.first_name," ",null==r?void 0:r.last_name]}),(0,t.jsx)("div",{className:"text-gray-500",children:null==r||null==(s=r.role)?void 0:s.name})]}),(0,t.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)(u.A,{className:"h-5 w-5"})})]})]})]})]}),(0,t.jsx)("main",{className:"py-6",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:a})})]})]})}},86651:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(71847).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},e=>{e.O(0,[79,706,441,255,358],()=>e(e.s=20596)),_N_E=e.O()}]);